(function(a){"use strict";function b(b){let c=b[0].querySelector(".tp-rental-overlay"),d=b[0].querySelector(".tp-input-field");a(".tp-search-input",b).on({focus:function(){c.style.cssText="visibility:visible;opacity:1;",d.style.cssText="z-index:1000;"},focusout:function(){c.style.cssText="visibility:hidden;opacity:0;",d.style.cssText="z-index:0;"}}),a(".tp-select",b).on("click",function(){c.style.cssText="visibility:visible;opacity:1;"}),a(".tp-rental-overlay",b).on("click",function(){c.style.cssText="visibility:hidden;opacity:0;"}),b.keyup(function(a){"Escape"===a.key&&(c.style.cssText="visibility:hidden;opacity:0;")})}var c=new Map,d=function(a,d){var f=a[0].querySelectorAll(".tp-search-bar"),g=d(".tp-search-bar",a),h=g.data("ajax_search"),i=g.data("acfdata"),j=g.data("genericfilter"),k=g.find(".tp-search-list-inner"),l=g.find(".tp-search-area"),m=g.find(".tp-search-header"),n=f[0].dataset?JSON.parse(f[0].dataset.resultSetting):[],o=f[0].dataset?JSON.parse(f[0].dataset.paginationData):[],p=f[0].dataset?JSON.parse(f[0].dataset.defaultData):[],q=n&&n.animation_effects?n.animation_effects:"no-animation";k.css("transform","translateX(0)");let r=f[0].querySelectorAll(".tp-rental-overlay");0<r.length&&b(a);let s=f[0].querySelectorAll(".tp-sbar-dropdown");0<s.length&&(d(".tp-sbar-dropdown",a).on("click",function(){d(this).attr("tabindex",1).focus(),d(this).toggleClass("active"),d(this).find(".tp-sbar-dropdown-menu").slideToggle(300)}),d(".tp-sbar-dropdown",a).focusout(function(){d(this).removeClass("active"),d(this).find(".tp-sbar-dropdown-menu").slideUp(300)}),d(".tp-sbar-dropdown .tp-sbar-dropdown-menu .tp-searchbar-li",a).on("click",function(){d(this).parents(".tp-sbar-dropdown").find("span").text(d(this).text()),d(this).parents(".tp-sbar-dropdown").find("input").attr("value",d(this).attr("id")).change()}));let t=f[0].querySelectorAll(".tp-rsearch-tagname");if(0<t.length&&t.forEach(function(a){a.addEventListener("click",function(a){a.preventDefault();let b=f[0].querySelectorAll(".tp-search-input");0<b.length&&(b[0].value=this.textContent,d(f[0]).change())})}),"yes"==h.ajax){function b(){let b=d("input[name=s]",a).val(),e=d("input[name=taxonomy]",a).val(),g=d("input[name=post_type]",a).val();k.html(""),m.find(".tp-search-pagina",a).html("");let r={action:"tp_search_bar",searchData:d(".tp-search-form",a).serialize(),text:b,postper:h.post_page,GFilter:j,ACFilter:i,ResultData:o,DefaultData:p,nonce:h.nonce};jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:r,beforeSend:function(a){null!=c&&0!=c.size&&"undefined"!=c.size&&"undefined"!=typeof c.abort&&c.abort(),c=a,"pagination"==o.Pagestyle&&(f[0].querySelector(".tp-search-list-inner").style.cssText="transform: translateX(0px)")},success:function(a){let b=f[0].querySelectorAll(".tp-search-error"),c=f[0].querySelector(".tp-search-header"),d=f[0].querySelector(".tp-search-list");if(b[0].classList.remove("active"),a.data.error&&0<b.length)return b[0].innerHTML=a.data.message,c.style.cssText="display:none",d.style.cssText="display:none",void l.slideDown(100);c.style.cssText="display:flex",d.style.cssText="display:flex",b[0].innerHTML="";var e=a&&a.data?a.data:"";if(e&&0!==e.post_count){let a=e.posts,b=null,c="",d="<div class=\""+".tp-search-slider tp-row".replace(".","")+"\">%s</div>",g="";for(b in l.slideDown(100),a)g+=y(a[b]),(0==(parseInt(b)+1)%e.limit_query||parseInt(b)===a.length-1)&&(c+=d.replace("%s",g),g="");if(k.html(c),"no-animation"!=q&&G("flex"),n.TotalResult){let a=n.TotalResultTxt?n.TotalResultTxt:"";m.find(".tp-search-resultcount").html(e.post_count+" "+a)}if(e.pagination)f[0].querySelector(".tp-search-pagina").innerHTML=e.pagination,B(".tp-search-slider tp-row",k,e,r);else if(!e.loadmore)e.lazymore&&e.total_count>e.limit_query&&(f[0].querySelector(".ajax_lazy_load").innerHTML=e.lazymore,A(".tp-search-slider tp-row",k,e,r));else if(e.total_count>e.limit_query){let a=f[0].querySelectorAll(".ajax_load_more");0<a.length&&a[0].insertAdjacentHTML("afterbegin",e.loadmore),z(e,r)}else{let a=f[0].querySelectorAll(".tp-search-pagina");0<a.length&&(a[0].innerHTML=e.loadmore_page)}}else return b[0]&&(b[0].classList.add("active"),b[0].innerHTML=n.errormsg),c.style.cssText="display:none",d.style.cssText="display:none",void l.slideDown(400)},complete:function(){}}).then(function(){setTimeout(function(){f[0].querySelector(".tp-ajx-loading").style.cssText="display:none",f[0].querySelector(".tp-close-btn").style.cssText="display:flex"},500),E()})}var u=o.PNavigation?o.PNavigation:0,v=h&&h.post_page?+h.post_page:3,w=p&&p.SpecialCTP?p.SpecialCTP:0,x=p&&h.ajaxsearchCharLimit?+h.ajaxsearchCharLimit:0;d(f[0]).on("change keyup",function(c){let e=c.type,g=d("input[name=s]",a).val(),h=d("input[name=post_type]",a).val(),i=d("input[name=taxonomy]",a).val(),j=d("input[name=cat]",a).val();"keyup"==e&&g.length>=x||"change"==e&&(h&&0==w||h&&g.length>=x||""==h&&g.length>=x)||j&&0==w||j&&g.length>=x||""==j&&g.length>=x?(f[0].querySelector(".tp-close-btn").style.cssText="display:none",f[0].querySelector(".tp-ajx-loading").style.cssText="display:flex",b(c.target.value)):f[0].querySelectorAll(".tp-close-btn")})}var y=function(a){let b="",c=a.title?a.title:"",d=a.content?a.content:"",e=n&&n.ResultlinkOn?n.ResultlinkOn:"",f=e&&n&&n.Resultlinktarget?`target="${n.Resultlinktarget}"`:"",g=e&&a&&a.link?`href="${a.link}"`:"";if(n.textlimit){if(n.TxtTitle){let a=n.textcount?n.textcount:100,b=n.textdots?n.textdots:"";"char"==n.texttype?c=c.substring(0,a)+b:"word"==n.texttype&&(c=c.split(" ",a).toString().replace(/,/g," ")+b)}if(n.Txtcont){let a=n.ContCount?n.ContCount:100,b=n.ContDots?n.ContDots:"";"char"==n.ContType?d=d.substring(0,a)+b:"word"==n.ContType&&(d=d.split(" ",a).toString().replace(/,/g," ")+b)}}return b+=`<div class="tp-ser-item ${h.styleColumn} animated-columns"><a class="tp-serpost-link" ${g} ${f}>`,n.ONThumb&&a.thumb&&(b+=`<div class="tp-serpost-thumb"><img class="tp-item-image" src="${a.thumb}""></div>`),b+=`<div class="tp-serpost-wrap">`,(n.ONTitle&&c||n.ONPrice&&a.Wo_Price)&&(b+=`<div class="tp-serpost-inner-wrap">`,n.ONTitle&&c&&(b+=`<div class="tp-serpost-title">${c}</div>`),n.ONPrice&&a.Wo_Price&&(b+=`<div class="tp-serpost-price">${a.Wo_Price}</div>`),b+=`</div>`),n.ONContent&&d&&(b+=`<div class="tp-serpost-excerpt">${d}</div>`),n.ONShortDesc&&a.Wo_shortDesc&&(b+=`<div class="tp-serpost-shortDesc">${a.Wo_shortDesc}</div>`),b+=`</div></a></div>`,b},z=function(a,b){let c=f[0].querySelectorAll(".post-load-more"),d=f[0].querySelector(".tp-search-slider"),e=f[0].querySelectorAll(".tp-search-pagina");0<e.length&&a.loadmore_page&&e[0].insertAdjacentHTML("beforeend",a.loadmore_page),0<c.length&&c[0].addEventListener("click",function(){let a=+this.dataset.page,g=+(a+1),h=f[0].querySelectorAll(".tp-ser-item");b.offset=h.length,b.loadNumpost=o.loadnumber,jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:b,beforeSend:function(){c[0].textContent=o.loadingtxt},success:function(a){let b=a.data.posts,h=a.data.total_count,i=null,j="";for(i in b)j+=y(b[i]);if(d.insertAdjacentHTML("beforeend",j),"no-animation"!=q&&G("flex"),c[0].dataset&&c[0].dataset.page&&(c[0].dataset.page=g),0<e.length){let a=e[0].querySelectorAll(".tp-load-number");0<a.length&&(a[0].textContent=g,F(a[0],400))}let k=f[0].querySelectorAll(".tp-ser-item");k.length>=h&&(c[0].classList.add("tp-hide"),c[0].parentNode.insertAdjacentHTML("beforeend",`<div class="plus-all-posts-loaded">${o.loadedtxt}</div>`))},complete:function(){c[0].textContent=o.loadbtntxt}})})},A=function(a,b,c,g){let h=f[0].querySelectorAll(".post-lazy-load"),i=f[0].querySelector(".tp-search-slider");var j,k,l,m,n,p,r=d(window),s=function(){j=r.width(),k=r.height(),l=d("body").height(),n=d(".tp-search-area").height(),p=d(".tp-search-area").offset().top+50,setTimeout(function(){n=d(".tp-search-area").height(),p=d(".tp-search-area").offset().top+50},50)};s(),r.resize(s),r.bind("scroll",function(a){a.preventDefault(),s(),m=r.scrollTop(),n=d(".tp-search-area").height(),p=d(".tp-search-area").offset().top+50;var b=d(".tp-search-area").find(".post-lazy-load"),c=f[0].querySelectorAll(".tp-ser-item");if(g.offset=c.length,g.loadNumpost=o.loadnumber,d(".tp-search-area").find(".post-lazy-load").length&&m<l&&m+60>n+p-k){if(b.data("requestRunning"))return;b.data("requestRunning",!0),jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:g,beforeSend:function(){},success:function(a){let b=a.data.posts,c=a.data.total_count,d=null,e="";for(d in b)e+=y(b[d]);i.insertAdjacentHTML("beforeend",e),"no-animation"!=q&&G("flex");let g=f[0].querySelectorAll(".tp-ser-item");g.length==c&&(h[0].classList.add("tp-hide"),h[0].parentNode.insertAdjacentHTML("beforeend",`<div class="plus-all-posts-loaded">${o.loadedtxt}</div>`),r.unbind("scroll"))},complete:function(){b.data("requestRunning",!1)}})}})},B=function(a,b,c,e){let g=f[0].querySelector(".tp-search-list-inner"),h=f[0].querySelectorAll(".tp-pagelink.tp-ajax-page"),i=f[0].querySelectorAll(".tp-pagelink.next"),j=f[0].querySelectorAll(".tp-pagelink.prev"),k=o&&o.Pcounter?o.Pcounter:0,l=o&&o.PClimit?o.PClimit:3;"no-animation"!=q&&H(),0<h.length&&h.forEach(function(a,b){if(1==+a.dataset.page){let a=f[0].querySelectorAll(".tp-search-slider");0<a.length&&a[0].classList.add("ajax-1")}else d(g).append("<div class=\"tp-search-slider tp-row ajax-"+ +(b+1)+"\"></div>");a.addEventListener("click",function(){g.classList.contains("animate-general")&&(g.style.opacity=1);let a=this.dataset&&this.dataset.page?+this.dataset.page:0,f=100*b;e.offset=a*v-v,D(h,a),u&&(j[0].setAttribute("data-prev",a),i[0].setAttribute("data-next",a));let k=g.querySelectorAll(".tp-search-slider.ajax-"+a);return 0<k.length&&k[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+-f+"%)",C(c),void("no-animation"!=q&&H(k))):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:e,beforeSend:function(){},success:function(a){let b=a.data.posts,e=null,h="";for(e in b)h+=y(b[e]);d(k[0]).append(h),g.style.cssText="transform: translateX("+-f+"%)",C(c),"no-animation"!=q&&G("flex")},complete:function(){"no-animation"!=q&&H()}})})}),0<i.length&&i[0].addEventListener("click",function(){let a=this.dataset&&this.dataset.next?+this.dataset.next:0,b=a+1,f=-(100*a);e.offset=b*v-v,k&&h.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("tp-hide")){a.classList.remove("tp-hide"),h.forEach(function(a,b){+(c+1-l)==b+1&&a.classList.add("tp-hide")})}}),D(h,b),u&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=g.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+f+"%)",C(c),void("no-animation"!=q&&H(m))):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:e,beforeSend:function(){},success:function(a){let b=a.data.posts,e=null,h="";for(e in b)h+=y(b[e]);d(m[0]).append(h),g.style.cssText="transform: translateX("+f+"%)",C(c),"no-animation"!=q&&G("flex")},complete:function(){"no-animation"!=q&&H()}})}),0<j.length&&j[0].addEventListener("click",function(){g.classList.contains("animate-general")&&(g.style.opacity=1);let a=this.dataset&&this.dataset.prev?+this.dataset.prev:0,b=a-1,f=-(100*b)+100;e.offset=b*v-v,k&&h.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("tp-hide")){a.classList.remove("tp-hide"),h.forEach(function(a,b){+(c+1)+ +l==b+1&&a.classList.add("tp-hide")})}}),D(h,b),u&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=g.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+f+"%)",C(c),void("no-animation"!=q&&H(m))):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:e,beforeSend:function(){},success:function(a){let b=a.data.posts,e=null,h="";for(e in b)h+=y(b[e]);d(m[0]).append(h),g.style.cssText="transform: translateX("+f+"%)",C(c),"no-animation"!=q&&G("flex")},complete:function(){"no-animation"!=q&&H()}})})},C=function(a){if(a.columns){let b=f[0].querySelectorAll(".tp-pagelink.next"),c=f[0].querySelectorAll(".tp-pagelink.prev");if(0<b.length){let c=b[0].dataset&&b[0].dataset.next?b[0].dataset.next:"";parseInt(c)==a.columns?d(".tp-pagelink.next").hide():d(".tp-pagelink.next").show()}if(0<c.length){let a=c[0].dataset&&c[0].dataset.prev?c[0].dataset.prev:"";1==parseInt(a)?d(".tp-pagelink.prev").hide():d(".tp-pagelink.prev").show()}}},D=function(a,b){0<a.length&&a.forEach(function(a){b==+a.dataset.page?a.classList.add("active"):a.classList.contains("active")&&a.classList.remove("active")})},E=function(){let b=f[0].querySelector(".tp-search-area"),c=f[0].querySelector("input[name=s]"),e=a[0].querySelectorAll(".tp-rental-overlay"),h=f[0].querySelector(".tp-close-btn");d(".tp-close-btn",a).on("click",function(){c.value="",d(this).hide(),d(b).slideUp(),0<e.length&&(e[0].style.cssText="visibility:hidden;opacity:0;")}),g.keyup(function(a){"Escape"===a.key&&(c.value="",d(b).slideUp(),h.style.cssText="display:none")})},F=function(a,b=600){a.style.display="",a.style.opacity=0;var c=+new Date,d=function(){a.style.opacity=+a.style.opacity+(new Date-c)/b,c=+new Date,1>+a.style.opacity&&(window.requestAnimationFrame&&requestAnimationFrame(d)||setTimeout(d,16))};d()},G=function(a="auto"){let b=f[0].querySelectorAll(".tp-search-list-inner.animate-general");if(0<b.length&&b[0].dataset&&(b[0].dataset.animateColumns="stagger")){let c=b[0].dataset.animateDelay?b[0].dataset.animateDelay:50,e=b[0].dataset.animateStagger?b[0].dataset.animateStagger:150,f=b[0].dataset.animateType,d=b[0].dataset.animateDuration?b[0].dataset.animateDuration:50,g=b[0].querySelectorAll(".animated-columns:not(.animation-done)");0<g.length&&g.forEach(function(b,g){b.style.opacity="0",b.style.display="none",setTimeout(function(){b.classList.contains("animation-done")||(b.classList.add("animation-done"),jQuery(b).velocity(f,{delay:c,display:a,duration:d,stagger:e}))},500*g)})}},H=function(a=""){let b=f[0].querySelectorAll(".tp-search-list-inner");0<b.length&&b[0].classList.contains("animate-general")&&(b[0].style.opacity=1),a&&(a.forEach(function(a){let b=a.querySelectorAll(".tp-ser-item.animation-done");0<b.length&&b.forEach(function(a){a.classList.remove("animation-done")})}),G("flex"))};document.addEventListener("click",function(a){if(null==a.target.closest(".tp-search-bar")){null!=c&&0!=c.size&&"undefined"!=c.size&&"undefined"!=typeof c.abort&&c.abort(),"none"!==f[0].querySelector(".tp-close-btn").style.display&&""!=f[0].querySelector(".tp-close-btn").style.display&&f[0].querySelector(".tp-close-btn").click();[".tp-ajx-loading",".tp-close-btn"].forEach(function(a){0<f[0].querySelectorAll(a).length&&(f[0].querySelector(a).style.cssText="display:none")})}}),document.addEventListener("mouseover",function(a){let b=a.target?a.target:"",c=f[0].querySelectorAll(".tp-search-input");(b.closest(".tp-close-btn")||b.closest(".tp-close-btn")==b)&&0<c.length&&c.forEach(function(a){a.blur(),f[0].querySelector(".tp-close-btn").style.cssText="display:flex",f[0].querySelector(".tp-ajx-loading").style.cssText="display:none"})},!1)};window.addEventListener("elementor/frontend/init",()=>{elementorFrontend.hooks.addAction("frontend/element_ready/tp-search-bar.default",d)})})(jQuery);