jQuery(function(o){"use strict";var e=o(document).find(".yith-ywraq-chosen"),i=function(e){return new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/i).test(e)},n={message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0},t=(o("#_ywraq_safe_submit_field").val(""),e.each(function(){o.fn.chosen!==undefined&&o(this).chosen({width:"350px",disable_search:!0,multiple:!0})}),o("select.yit-contact-form").parent().parent()),a=o("select.contact-form-7").parent().parent(),r=o("select.gravity-forms").parent().parent();function s(){var e=o("#_ywraq_deposit_enable").val(),t=o("#_ywraq_pay_quote_now").val(),a=o("#_ywraq_deposit_rate").closest(".the-metabox");0!=t&&"no"!=t||(0==e||"no"==e?a.hide():a.show())}o("select#ywraq_inquiry_form_type").change(function(){switch(o("option:selected",this).val()){case"yit-contact-form":t.show(),a.hide(),r.hide();break;case"contact-form-7":t.hide(),r.hide(),a.show();break;case"gravity-forms":t.hide(),a.hide(),r.show();break;default:t.hide(),a.hide(),r.hide()}}).change(),o("#ywraq_submit_button").on("click",function(e){e.preventDefault(),o("#_ywraq_safe_submit_field").val("send_quote"),o(this).closest("form").submit()}),0<o(".ywraq-add-new-quote-button").length&&(e=o(".ywraq-add-new-quote-button"),o(".wp-header-end").before(e)),o(document).find("#ywraq_pdf_button").on("click",function(e){e.preventDefault();e=o(this).closest("form");o("#_ywraq_safe_submit_field").val("create_preview_pdf"),o.post(document.location.href,e.serialize()).done(function(e){var t;(t=""!==e?o("<div></div>").html(e).find("#ywraq_pdf_button").data("pdf"):t)&&window.open(t,"_blank")}),o("#_ywraq_safe_submit_field").val("")}),o("#ywraq_check_email").on("click",function(e){e.preventDefault();var t=o(this),e=o("#_ywraq_email_preview_email").val(),a=t.closest("form");i(e)?(o("#_ywraq_safe_submit_field").val("send_email_preview"),t.block(n),o.post(document.location.href,a.serialize()).done(function(){t.unblock(),o(".ywraq-email-success").show(),setTimeout(function(){o(".ywraq-email-success").hide("slow")},3e3)})):o(".ywraq-email-error").show()}),o("#_ywraq_email_preview_email").on("change click",function(){var e=o(this).val();i(e)?o(".ywraq-email-error").hide():o(".ywraq-email-error").show()}),0<o("#_ywcm_request_expire").length&&o("#_ywcm_request_expire").each(function(){o.datepicker.setDefaults({gotoCurrent:!0,dateFormat:"yy-mm-dd"}),o(this).datepicker("option","minDate","1d")}),o(document).on("change",o("#_ywraq_deposit_enable"),function(){s()}),s(),o("#ywraq_pdf_file").attr("disabled","disabled");var e=o(document).find(".ywraq_form_link"),c=function c(e,t){return null===t||""==t?"":"contact-form-7"===e?"&post="+t+"&action=edit":"gravity-forms"===e?"&id="+t:"ninja-forms"===e?"&form_id="+t:"wpforms"===e?"&view=fields&form_id="+t:void 0},d=(e.each(function(){var t=o(this),e=t.closest(".forminp-select").find("select"),a=t.attr("href"),i=t.data("type"),n=e.val();t.attr("href",a+c(i,n)),e.on("change",function(){var e=o(this).val();t.attr("href",a+c(i,e))})}),o("#ywraq_message_to_view_details").closest("tr")),_=o("#ywraq_thank_you_page").closest("tr");o(document).on("change",'input[name="ywraq_how_show_after_sent_the_request"]:checked',function(e){var t=o(this).val();"simple_message"!==t?d.hide():o("#ywraq_enable_link_details").trigger("change"),"thank_you_page"!==t?_.hide():_.show()}),o(document).find('input[name="ywraq_how_show_after_sent_the_request"]').trigger("change");var l,h,u,f;"simple_message"!==o(document).find('input[name="ywraq_how_show_after_sent_the_request"]:checked').val()&&d.hide(),o(".yith-plugin-fw.metaboxes-tab.yith-plugin-ui").find("[data-deps]").each(function(){var e=o(this),i=e.closest(".the-metabox"),t=e.attr("data-deps").split(","),n=e.attr("data-deps_value").split(","),r=[];o.each(t,function(a,e){o("#"+e).on("change",function(){var e=this.value,t="";"radio"==this.type&&!o(this).is(":checked")||("checkbox"==this.type&&(e=o(this).is(":checked")?"yes":"no"),t=(t=n[a]+"").split("|"),r[a]=-1!==o.inArray(e,t),-1===o.inArray(!1,r)?i.fadeIn():i.fadeOut())}).change()})}),o(".yith-plugins_page_yith_woocommerce_request_a_quote .form-table").find("[data-deps]").each(function(){var e=o(this),i=e.closest("tr"),t=e.attr("data-deps").split(","),n=e.attr("data-deps_value").split(","),r=[];o.each(t,function(a,e){o('[name="'+e+'"]').on("change",function(){var e=this.value,t="";"radio"==this.type&&!o(this).is(":checked")||("checkbox"==this.type&&(e=o(this).is(":checked")?"yes":"no"),t=(t=n[a]+"").split("|"),r[a]=-1!==o.inArray(e,t),-1===o.inArray(!1,r)?i.fadeIn():i.fadeOut())}).change()})}),o(document).on("change","#ywraq_show_button_on_cart_page, #ywraq_show_button_on_checkout_page",function(){var e=o("#ywraq_checkout_quote_button_label").closest("tr"),t=o("#ywraq_show_button_on_cart_page"),a=o("#ywraq_show_button_on_checkout_page");t.is(":checked")||a.is(":checked")?e.fadeIn():e.fadeOut()}),o("#ywraq_show_button_on_cart_page").change(),e=o(".single_select_page"),l=o(".ywraq-create-page"),h=l.closest("tr"),0<e.length&&(e.find(".description").before(l),h.hide()),o(document).on("click",".yith-pencil.customer-request-editor",function(){var e=o(this).closest(".customer-request-field-wrapper");e.hasClass("edit")?(e.removeClass("edit"),e.find("input, textarea").prop("readonly",!0)):(e.addClass("edit"),e.find("input, textarea").prop("readonly",!1))}),o("#ywraq_enable_expired_time").change(function(){o("#ywraq_expired_time").parent().parent().parent().hasClass("yith-disabled")?o("#ywraq_expired_time_days").attr("disabled","disabled"):o("#ywraq_expired_time_days").attr("disabled",!1)}).change(),yith_ywraq_admin.is_raq_panel&&o("#doaction, #post-query-submit").on("click",function(e){e.preventDefault(),window.onbeforeunload=null,o(this).closest("form").submit()}),0<o(".hide-tab-templates").length&&(o(".hide-tab-templates").closest("li").find(".nav-subtab li:nth-child(3)").hide(),o(".yith-nav-sub-tab-wrapper a:nth-child(3)").hide()),o(document).on("change","#ywraq_pdf_template_to_use",function(){"default"===o(this).val()?o(".yith-nav-sub-tab-wrapper a:nth-child(3)").hide():o(".yith-nav-sub-tab-wrapper a:nth-child(3)").show()}),0<o(document).find("#woocommerce_ywraq_send_quote_reminder_accept_days_after_sent").length&&(f=(u=o(document).find("#woocommerce_ywraq_send_quote_reminder_accept_days_after_sent")).data("description"),u.after(o('<span style="margin-left:10px; line-height: 30px"></span>').html(f))),0<o(document).find("#woocommerce_ywraq_send_quote_reminder_days_before_expire").length&&(f=(u=o(document).find("#woocommerce_ywraq_send_quote_reminder_days_before_expire")).data("description"),u.after(o('<span style="margin-left:10px; line-height: 30px"></span>').html(f)));0<o(".yith-plugins_page_yith_woocommerce_request_a_quote form").find(".yith-plugin-fw--required").length&&o("#yith-plugin-fw-float-save-button").hide(),o("#main-save-button, #yith-plugin-fw-float-save-button").on("click",function(e){var t=o("form").find(".yith-plugin-fw--required"),i=!1,n=!0;if(n&&t.each(function(){var e,t=o(this),a=o('<span class="validate-required">');a.html(yith_ywraq_admin.required_label),t.is(":visible")&&((e=t.find("select")).length?0===e.find(":selected").length&&(n=!1,i=i||t,t.addClass("ywraq_required_check"),t.find(".validate-required").length||t.find(".description").before(a)):""===t.find("input").val()&&(n=!1,i=i||t,t.addClass("ywraq_required_check"),t.find(".validate-required").length||t.find(".description").before(a)))}),n)return!0;e.preventDefault(),t=i,o("html,body").animate({scrollTop:t.offset().top-100},"slow");e=o(document).find(".ywraq_required_check select"),t=o(document).find(".ywraq_required_check input");e.on("select2:open",function(e){o(this).parents(".yith-plugin-fw--required").removeClass("ywraq_required_check"),o(this).parents(".yith-plugin-fw--required").find(".validate-required").remove(),e.stopImmediatePropagation()}),t.on("change",function(e){e.stopImmediatePropagation(),o(this).parents(".yith-plugin-fw--required").removeClass("ywraq_required_check"),o(this).parents(".yith-plugin-fw--required").find(".validate-required").remove()})}),o(document).on("click","#ywraq-check-pdf .notice-dismiss",function(){document.cookie="ywraq_check_template_pdf_notice=yes;path=/",o("#ywraq-check-pdf").remove()})});