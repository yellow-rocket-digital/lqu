(function(e){"use strict";function n(n){r=n,i=r.find("[data-user-id]").attr("data-user-id"),e("#wpcp-modal-selector").fadeIn()}function t(){e("#wpcp-modal-selector").fadeOut()}function a(n){if(n.origin!==window.parent.location.origin)return;if("object"!=typeof n.data||null===n.data||void 0===n.data.action)return;if("wpcp-select-entries"!==n.data.action)return;if("shareonedrive"!==n.data.slug)return;const a=n.data.entries[0];e.ajax({type:"POST",url:ShareoneDrive_vars.ajax_url,data:{action:"shareonedrive-linkusertofolder",account_id:a.account_id,drive_id:a.drive_id,id:a.entry_id,text:a.entry_name,userid:i,_ajax_nonce:ShareoneDrive_vars.createlink_nonce},beforeSend:function(){r.find(".select_folder").addClass("hidden"),t()},complete:function(){},success:function(e){void 0!==e.path?(r.parent().find(".column-private_folder").html("<strong>"+e.path+"</strong>"),r.find(".deselect_folder").removeClass("hidden")):location.reload()},dataType:"json"})}var r=null,i=null;e("#wpcp .select_folder").on("click",function(t){n(e(this).parent())}),window.addEventListener("message",a),e("#wpcp .deselect_folder").on("click",function(n){var t=e(this),a=e(this).attr("data-user-id");e.ajax({type:"POST",url:ShareoneDrive_vars.ajax_url,data:{action:"shareonedrive-unlinkusertofolder",userid:a,_ajax_nonce:ShareoneDrive_vars.createlink_nonce},beforeSend:function(){t.addClass("hidden")},success:function(e){"1"===e?(t.prev().removeClass("hidden"),t.parent().parent().find(".column-private_folder").text("")):location.reload()},complete:function(e){},dataType:"text"})})})(jQuery);