"use strict";!function(){jQuery(function(o){var t,i,e,n=null!=(n=window.typenow)?n:"",c=null!=(e=window.pagenow)?e:"";if("shop_order"===n&&(t=o.WCBackboneModal.View,i=function(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return o("#wc-backbone-modal-dialog .modal-close").trigger("click"),new t({target:"wc-pip-action-modal",string:e}),o("#wc-pip-confirm-order-action").on("click",function(e){var t;return e.preventDefault(),"print"!==o(this).data("action")?((t=o(this).closest("div.wc-backbone-modal-content")).block({message:null,overlayCSS:{background:"#FFF",opacity:.6}}),e={action:"wc_pip_process_order_action",security:wc_pip_admin.process_order_action_nonce,document_type:o(this).data("type"),document_action:o(this).data("action"),order_ids:o(this).data("orders")},o.post(wc_pip_admin.ajax_url,e,function(e){return t.unblock(),e.success?i(e.data,n):console.log(e)})):("edit-shop_order"===c&&o('input[name="post[]"]:checked').attr("checked",!1),o("#wc-pip-cancel-order-action").trigger("click"),window.open(o(this).attr("href"),"_blank"),"shop_order"===c&&n?o(document).find("form#post").submit():location.reload())}),o("#wc-pip-dismiss-done-order-action").on("click",function(e){if(e.preventDefault(),o("#wc-backbone-modal-dialog .modal-close").trigger("click"),"edit-shop_order"===c&&o('input[name="post[]"]:checked').attr("checked",!1),"shop_order"===c)return n?o('button[name="save"]').trigger("click"):location.reload()})},o(".wc_pip_document").pointer({pointerClass:"wc-pip-document-actions-pointer",position:{edge:"right",align:"right"},content:function(e){var t=parseInt(o(this).attr("href").replace(/^\D+/g,""),10);return o("#wc-pip-pointer-order-actions-"+t).html()},buttons:function(e,t){return o('<button class="button button-large wc-pip-pointer-close">'+wc_pip_admin.i18n.close+"</button>").bind("click.pointer",function(e){return e.preventDefault(),t.element.pointer("close")})},opened:function(e){var t=parseInt(o(this).attr("href").replace(/^\D+/g,""),10);return o(".wc-pip-document-actions-pointer").each(function(){if(o(this).is(":visible")&&parseInt(o(this).find("input").val(),10)!==t)return o(this).find(".wc-pip-pointer-close").trigger("click")})}}).on("click",function(e){return e.preventDefault(),o(this).pointer("toggle"),o(".wc-pip-document-tooltip-order-action").on("click",function(e){return e.preventDefault(),e={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:o(this).data("action"),order_ids:[o(this).data("order-id")]},o.post(wc_pip_admin.ajax_url,e,function(e){return e.success?i(e.data):console.log(e)})})}),o(document).on("mouseup",function(e){e=o(e.target);if(e&&!e.hasClass("wc_pip_document")&&0===e.closest("div.wc-pip-document-actions-pointer").length)return o(".wc-pip-document-actions-pointer").each(function(){if(o(this).is(":visible"))return o(this).find(".wc-pip-pointer-close").trigger("click")})}),o(".bulkactions select").each(function(){var e=o(this),t=e.find("option[value^='wc_pip_']");if(t.length)return t=o("<optgroup>").attr("label",wc_pip_admin.i18n.plugin_name).append(t.detach()),e.append(t)}),o("#doaction, #doaction2").on("click",function(e){var t=o(this).prev("select").val(),n=[];if(-1!==wc_pip_admin.order_bulk_actions.indexOf(t))return e.preventDefault(),o('input[name="post[]"]:checked').each(function(){return n.push(o(this).val())}),e={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:t,order_ids:n},o.post(wc_pip_admin.ajax_url,e,function(e){return e.success&&e.data?i(e.data):console.log(e)})}),o(".wc-reload").on("click",function(e){var t,n=o("select[name=wc_order_action]").val();if(-1!==wc_pip_admin.order_bulk_actions.indexOf(n))return e.preventDefault(),t=o(this).hasClass("save_order"),e={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:n,order_ids:[o("#post_ID").val()]},o.post(wc_pip_admin.ajax_url,e,function(e){return e.success&&e.data?i(e.data,t):console.log(e)})})),"woocommerce_page_wc-settings"===c)return o("#wc_pip_invoice_number_reset_counter").attr("checked",!1),o(".hide-options-if-checked").change(function(e){return o(this).is(":checked")?o(document).find(".hide-if-use-order-number").closest("tr").hide():o(document).find(".hide-if-use-order-number").closest("tr").show()}).change(),o("#wc_pip_invoice_number_reset_counter").change(function(e){var t=o(this).is(":checked"),n=document.getElementById("wc_pip_invoice_number_start");return!0===t?!0===confirm(wc_pip_admin.i18n.reset_counter_warning)?n.readOnly=!1:o(this).prop("checked",!1):n.readOnly=!0}).change(),o(".wc-pip-media-upload").on("click",function(e){var n,i;e.preventDefault(),n=o(this),"undefined"!=typeof wp&&wp.media&&((i=wp.media.frames.file_frame=wp.media({title:o(this).data("uploader_title"),button:{text:o(this).data("uploader_button_text")},multiple:!1})).on("select",function(e){var t=i.state().get("selection").first().toJSON();return n.prev(".wc-pip-media-url").val(t.url)}),i.open())})})}.call(void 0);